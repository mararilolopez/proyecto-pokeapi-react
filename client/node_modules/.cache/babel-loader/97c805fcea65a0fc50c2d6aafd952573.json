{"ast":null,"code":"var _jsxFileName = \"/Users/juanrosales/Desktop/Proyecto-Navidad-React/pocratech/client/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport UserContext from \"./context/UserContext\"; //Vinculación con la hoja de estilo app.scss\n\nimport \"./scss/app.scss\"; //Conexión API\n\nimport { getPokemons, getPokemonData } from \"./services/api\"; //Componentes\n\nimport PokeCard from \"./components/PokeCard\";\nimport RegisterForm from \"./components/Auth/RegisterForm/RegisterForm\";\nimport LoginForm from \"./components/Auth/LoginForm\";\nimport Header from \"./components/Header/Header\";\nimport HeaderGenerico from \"./components/Header/HeaderGenerico\"; //No funciona este componente\n\n/* import MisPokemons from \"./components/MisPokemons/MisPokemons\"; */\n//Creo cuatro estados, los dos primeros para traer la información de los pokemons, el tercero crea un estado user para el usuario que esté logueado y un setUser que setee dicho estado. El objetivo de ese estado es crear dos header (Header.js y HeaderGenerico.js) que variarán según si el usuario está logueado o no. En caso de estar logueado aparecerá el botón cerrar sesión mientras que no saldrá dicho botón si no está logueado. El cuarto estado es para recoger y setear el token en el localStorage.\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [trigerPokedex, setTrigerPokedex] = useState(true);\n  const [pokemons, setPokemons] = useState([]);\n  const [user, setUser] = useState([]);\n  const [token, setToken] = useState(null); //Creo un estado cuyo valor inicial para showLogin es true y su setEstado es setShowLogin y en el return de App.js creo una ternaria en la que llamo a los componentes LoginForm y RegisterForm. LoginForm si showLogin es verdadero y RegisterForm si es falso. Dichos componentes utilizan el estado setShowLogin declarado aquí en App.js. En cada componente hijo (LoginForm y RegisterForm) declaro una constante de setShowLogin cuyas props es true o false y en cada hijo hago una función handleInput que se ejecutará cuando haya algún cambio en el cualquier input del formulario y una función handleSubmit que se ejecuta cuando se envía el formulario. En el RegisterForm en el momento que envías el formulario de refistro el setShowLogin se pone en true. Además, tras el formulario de registro se muestra la opción de que el usuario se loguee si está registrado ya cuyo setShowLogin también será true. Por su parte, en el LoginForm al enviar el formulario (handleSubmit) se guarda el token con el user_name y el password. Y en este componente solo declaramos setShowLogin como falso en caso de que no esté registrado el usuario al pinchar en el botón regístrate.\n  //El setShowLogin no tiene contenido gráfico/visual como tal, solo es un estado cuyo valor es true o false y dependiendo de dicho valor llamará a través de la ternaria al component RegisterForm o LoginForm.\n  //Las funciones para registrarse y loguearse finalmente las traslado a sus respectivos archivos js, es decir, LoginForm.js y RegisterForm.js.\n\n  const [showLogin, setShowLogin] = useState(true); //Vinculo React con la api con el fetchPokemons y un getTokenLocalStorage para recoger el token del localStorage cada vez que se recargue la página (al ser useEffect) y un getUserLocalStorage para recoger toda la información del usuario que aparece en el localStorage cada vez que se recarga la página. Además, muestra un array con el número de pokemons que he establecido en la ruta de la api de pokemon\n\n  useEffect(() => {\n    fetchPokemons();\n    getTokenLocalStorage();\n    getUserLocalStorage();\n  }, [trigerPokedex]); //Esta es la función fetchPokemons que llamo justo arriba en el useEffect que recoge los datos de los Pokemons de forma asíncrona para que no se genere un error y React espere a recibir dicha información\n\n  const fetchPokemons = async () => {\n    try {\n      const data = await getPokemons();\n      const promises = data.results.map(async pokemon => {\n        return await getPokemonData(pokemon.url);\n      });\n      const result = await Promise.all(promises);\n      setPokemons(result);\n      console.log(result);\n    } catch (error) {\n      console.log(error);\n    }\n  }; // Simulamos que traemos información de un usuario que creamos con estos catos\n\n\n  const userData = {\n    username: \"Ricardo\",\n    school: \"Socratech\",\n    year: 2021\n  }; //Creamos una variable para el token que la llamamos con un string \"token\"\n\n  const TOKEN = \"token\"; //Esta función reconoce el logueo de un usuario mientras no cierre sesión. Su token seguirá en el localStorage hasta que no se desloguee.\n\n  const getTokenLocalStorage = () => {\n    setToken(localStorage.getItem(TOKEN));\n  }; //Esta función obtiene la información del usuario del LocalStorage y compruebo el token del usuario y hago una ternaria en la que se recoge ese token y se decodifica y se trae los datos del usuario (.user) vinculados a dicho token. En caso de no haber token la respuesta será null\n\n\n  const getUserLocalStorage = () => {\n    console.log(localStorage.getItem(TOKEN));\n    localStorage.getItem(TOKEN) ? setUser(jwtDecode(localStorage.getItem(TOKEN)).user) : setUser(null);\n  }; //Esto ya es la \"vista\" que se muestra al usuario (jsx)\n  //En la línea 81 hago una ternaria en la que indico que si hay token me cargue el componente Header con toda la información del usuario y si no hay token que cargue el HeaderGenerico. Después, hay un botón para que el usuario pueda ver nuevos pokemons vinculado al estado setTrigerPokedex, a continuación hago un bucle (.map) de una card que contiene la información de cada Pokemon y al final hago otra ternaria que llama al estado showLogin y que responde en ese caso el componente LoginForm, en caso de que el showLogin sea \"false\" se mostrará el componente RegisterForm\n\n\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: userData,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [token ? /*#__PURE__*/_jsxDEV(Header, {\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 18\n      }, this) : /*#__PURE__*/_jsxDEV(HeaderGenerico, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 43\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"botones\",\n        onClick: () => setTrigerPokedex(!trigerPokedex),\n        children: \"Descubre nuevos pokemons\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"---------------------------\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), pokemons.map((pokemon, idx) => {\n        return /*#__PURE__*/_jsxDEV(PokeCard, {\n          pokemon: pokemon\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 18\n        }, this);\n      }), showLogin ? /*#__PURE__*/_jsxDEV(LoginForm, {\n        setShowLogin: setShowLogin\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(RegisterForm, {\n        setShowLogin: setShowLogin\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"zaTAFkbDURG038sN5a7dhD2uPtE=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/juanrosales/Desktop/Proyecto-Navidad-React/pocratech/client/src/App.js"],"names":["useEffect","useState","axios","jwtDecode","UserContext","getPokemons","getPokemonData","PokeCard","RegisterForm","LoginForm","Header","HeaderGenerico","App","trigerPokedex","setTrigerPokedex","pokemons","setPokemons","user","setUser","token","setToken","showLogin","setShowLogin","fetchPokemons","getTokenLocalStorage","getUserLocalStorage","data","promises","results","map","pokemon","url","result","Promise","all","console","log","error","userData","username","school","year","TOKEN","localStorage","getItem","idx"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport UserContext from \"./context/UserContext\";\n\n//Vinculación con la hoja de estilo app.scss\nimport \"./scss/app.scss\";\n\n//Conexión API\nimport { getPokemons, getPokemonData } from \"./services/api\";\n\n//Componentes\nimport PokeCard from \"./components/PokeCard\";\nimport RegisterForm from \"./components/Auth/RegisterForm/RegisterForm\";\nimport LoginForm from \"./components/Auth/LoginForm\";\nimport Header from \"./components/Header/Header\";\nimport HeaderGenerico from \"./components/Header/HeaderGenerico\";\n//No funciona este componente\n/* import MisPokemons from \"./components/MisPokemons/MisPokemons\"; */\n\n//Creo cuatro estados, los dos primeros para traer la información de los pokemons, el tercero crea un estado user para el usuario que esté logueado y un setUser que setee dicho estado. El objetivo de ese estado es crear dos header (Header.js y HeaderGenerico.js) que variarán según si el usuario está logueado o no. En caso de estar logueado aparecerá el botón cerrar sesión mientras que no saldrá dicho botón si no está logueado. El cuarto estado es para recoger y setear el token en el localStorage.\nfunction App() {\n  const [trigerPokedex, setTrigerPokedex] = useState(true);\n  const [pokemons, setPokemons] = useState([]);\n  const [user, setUser] = useState([]);\n  const [token, setToken] = useState(null);\n\n  //Creo un estado cuyo valor inicial para showLogin es true y su setEstado es setShowLogin y en el return de App.js creo una ternaria en la que llamo a los componentes LoginForm y RegisterForm. LoginForm si showLogin es verdadero y RegisterForm si es falso. Dichos componentes utilizan el estado setShowLogin declarado aquí en App.js. En cada componente hijo (LoginForm y RegisterForm) declaro una constante de setShowLogin cuyas props es true o false y en cada hijo hago una función handleInput que se ejecutará cuando haya algún cambio en el cualquier input del formulario y una función handleSubmit que se ejecuta cuando se envía el formulario. En el RegisterForm en el momento que envías el formulario de refistro el setShowLogin se pone en true. Además, tras el formulario de registro se muestra la opción de que el usuario se loguee si está registrado ya cuyo setShowLogin también será true. Por su parte, en el LoginForm al enviar el formulario (handleSubmit) se guarda el token con el user_name y el password. Y en este componente solo declaramos setShowLogin como falso en caso de que no esté registrado el usuario al pinchar en el botón regístrate.\n  //El setShowLogin no tiene contenido gráfico/visual como tal, solo es un estado cuyo valor es true o false y dependiendo de dicho valor llamará a través de la ternaria al component RegisterForm o LoginForm.\n  //Las funciones para registrarse y loguearse finalmente las traslado a sus respectivos archivos js, es decir, LoginForm.js y RegisterForm.js.\n  const [showLogin, setShowLogin] = useState(true);\n\n  //Vinculo React con la api con el fetchPokemons y un getTokenLocalStorage para recoger el token del localStorage cada vez que se recargue la página (al ser useEffect) y un getUserLocalStorage para recoger toda la información del usuario que aparece en el localStorage cada vez que se recarga la página. Además, muestra un array con el número de pokemons que he establecido en la ruta de la api de pokemon\n  useEffect(() => {\n    fetchPokemons();\n    getTokenLocalStorage();\n    getUserLocalStorage();\n  }, [trigerPokedex]);\n\n  //Esta es la función fetchPokemons que llamo justo arriba en el useEffect que recoge los datos de los Pokemons de forma asíncrona para que no se genere un error y React espere a recibir dicha información\n  const fetchPokemons = async () => {\n    try {\n      const data = await getPokemons();\n      const promises = data.results.map(async (pokemon) => {\n        return await getPokemonData(pokemon.url);\n      });\n      const result = await Promise.all(promises);\n      setPokemons(result);\n      console.log(result);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  // Simulamos que traemos información de un usuario que creamos con estos catos\n  const userData = {\n    username: \"Ricardo\",\n    school: \"Socratech\",\n    year: 2021,\n  };\n  //Creamos una variable para el token que la llamamos con un string \"token\"\n  const TOKEN = \"token\";\n\n  //Esta función reconoce el logueo de un usuario mientras no cierre sesión. Su token seguirá en el localStorage hasta que no se desloguee.\n  const getTokenLocalStorage = () => {\n    setToken(localStorage.getItem(TOKEN));\n  };\n\n  //Esta función obtiene la información del usuario del LocalStorage y compruebo el token del usuario y hago una ternaria en la que se recoge ese token y se decodifica y se trae los datos del usuario (.user) vinculados a dicho token. En caso de no haber token la respuesta será null\n  const getUserLocalStorage = () => {\n    console.log(localStorage.getItem(TOKEN));\n    localStorage.getItem(TOKEN)\n      ? setUser(jwtDecode(localStorage.getItem(TOKEN)).user)\n      : setUser(null);\n  };\n\n  //Esto ya es la \"vista\" que se muestra al usuario (jsx)\n  //En la línea 81 hago una ternaria en la que indico que si hay token me cargue el componente Header con toda la información del usuario y si no hay token que cargue el HeaderGenerico. Después, hay un botón para que el usuario pueda ver nuevos pokemons vinculado al estado setTrigerPokedex, a continuación hago un bucle (.map) de una card que contiene la información de cada Pokemon y al final hago otra ternaria que llama al estado showLogin y que responde en ese caso el componente LoginForm, en caso de que el showLogin sea \"false\" se mostrará el componente RegisterForm\n  return (\n    <UserContext.Provider value={userData}>\n      <div className=\"App\">\n        {token ? <Header user={user} /> : <HeaderGenerico />}\n        <button\n          className=\"botones\"\n          onClick={() => setTrigerPokedex(!trigerPokedex)}\n        >\n          Descubre nuevos pokemons\n        </button>\n        <p>---------------------------</p>\n        {pokemons.map((pokemon, idx) => {\n          return <PokeCard key={idx} pokemon={pokemon} />;\n        })}\n        {/*  {token ? (\n          <MisPokemons setShowLogin={setShowLogin} />\n        ) : (\n          \"No tienes poquemos, registrate\"\n        )} */}\n        {/* <p>---------------------------</p> */}\n\n        {showLogin ? (\n          <LoginForm setShowLogin={setShowLogin} />\n        ) : (\n          <RegisterForm setShowLogin={setShowLogin} />\n        )}\n      </div>\n    </UserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}